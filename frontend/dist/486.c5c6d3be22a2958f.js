"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[486],{4486:(B,g,i)=>{i.r(g),i.d(g,{ProjectModule:()=>$});var c=i(9808),a=i(5020),p=i(1630),l=i(1358),s=i(2382);class f{}var e=i(5e3),u=i(264),m=i(5299);function Z(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"form",4),e.NdJ("ngSubmit",function(){return e.CHM(o),e.oxw().onSubmit()}),e.TgZ(1,"div",5),e.TgZ(2,"label",6),e._uU(3,"Name"),e.qZA(),e._UZ(4,"input",7),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"label",8),e._uU(7,"Description"),e.qZA(),e._UZ(8,"textarea",9),e.qZA(),e.TgZ(9,"div",10),e.TgZ(10,"button",11),e._uU(11),e.qZA(),e.qZA(),e.qZA()}if(2&t){const o=e.oxw();e.Q6J("formGroup",o.projectForm),e.xp6(11),e.hij(" ",o.isAddMode?"Create":"Update"," Project ")}}let h=(()=>{class t{constructor(o,r,d){this.fb=o,this.projectFacade=r,this.route=d}ngOnInit(){const o=this.route.snapshot.params.id;this.isAddMode=!o,this.isAddMode?(this.selectedProject=new f,this.setFormGroup()):this.projectFacade.getProjectById(o).subscribe(r=>{this.selectedProject=r,this.setFormGroup()})}setFormGroup(){this.projectForm=this.fb.group({name:[this.selectedProject.name,s.kI.required],description:[this.selectedProject.description,s.kI.required]})}onSubmit(){this.projectForm.invalid||(this.selectedProject=Object.assign(Object.assign({},this.selectedProject),this.projectForm.value),this.isAddMode?this.projectFacade.createProject(this.selectedProject):this.projectFacade.updateProject(this.selectedProject))}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(s.qu),e.Y36(u.J),e.Y36(a.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["addeditproject"]],decls:5,vars:2,consts:[[1,"flex","h-full","items-center","justify-center"],[1,"grid","w-3/4","rounded-lg","bg-white","shadow-xl","md:w-1/2","lg:w-1/3"],[1,"pt-8","text-center","text-xl","font-bold","text-gray-600","md:text-2xl"],["errorTailor","",3,"formGroup","ngSubmit",4,"ngIf"],["errorTailor","",3,"formGroup","ngSubmit"],[1,"mx-7","mt-5","grid"],["for","name",1,"text-light","text-xs","font-medium","text-gray-500","md:text-sm"],["type","text","placeholder","Project name","formControlName","name",1,"mt-1","rounded-lg","border-2","border-cyan-300","py-2","px-3","focus:border-transparent","focus:outline-none","focus:ring-2","focus:ring-cyan-600"],["for","description",1,"text-light","text-xs","font-medium","text-gray-500","md:text-sm"],["placeholder","Enter description","formControlName","description","rows","6",1,"mt-1","rounded-lg","border-2","border-cyan-300","py-2","px-3","focus:border-transparent","focus:outline-none","focus:ring-2","focus:ring-cyan-600"],[1,"flex","items-center","justify-center","py-5"],[1,"w-auto","rounded-lg","bg-cyan-500","px-4","py-2","font-medium","text-white","shadow-xl","hover:bg-cyan-700"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1",2),e._uU(3),e.qZA(),e.YNc(4,Z,12,2,"form",3),e.qZA(),e.qZA()),2&o&&(e.xp6(3),e.hij(" ",r.isAddMode?"New":"Update"," Project "),e.xp6(1),e.Q6J("ngIf",r.projectForm))},directives:[c.O5,s._Y,s.JL,m.m6,s.sg,m.kH,s.Fj,s.JJ,s.u],encapsulation:2}),t})();function x(t,n){if(1&t){const o=e.EpF();e.ynx(0),e.TgZ(1,"div",14),e.TgZ(2,"div",15),e.TgZ(3,"input",16),e.NdJ("change",function(d){return e.CHM(o),e.oxw(2).checkBoxChanged(d)}),e.qZA(),e.TgZ(4,"label",17),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"p",18),e._uU(7),e.qZA(),e.qZA(),e.BQk()}if(2&t){const o=n.$implicit,r=n.index,d=e.oxw().ngIf;e.xp6(3),e.MGl("id","userCheckbox-",r,""),e.s9C("value",o._id),e.Q6J("disabled",d.members.includes(o._id)),e.xp6(1),e.MGl("for","userCheckbox-",r,""),e.xp6(1),e.Oqu(o.name),e.xp6(2),e.Oqu(o.role)}}function j(t,n){if(1&t&&(e.TgZ(0,"div",8),e.TgZ(1,"h1",9),e._uU(2," Add employee to project "),e.TgZ(3,"span",10),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"h3",9),e._uU(6),e.qZA(),e._UZ(7,"input",11),e.TgZ(8,"div",12),e.YNc(9,x,8,6,"ng-container",13),e.ALo(10,"async"),e.qZA(),e.qZA()),2&t){const o=n.ngIf,r=e.oxw();e.xp6(4),e.Oqu(o.name),e.xp6(2),e.hij(" Members of ",o.company," "),e.xp6(3),e.Q6J("ngForOf",e.lcZ(10,3,r.employees$))}}let v=(()=>{class t{constructor(o,r){this.projectFacade=o,this.route=r,this.invitedMembers=[]}ngOnInit(){this.projectId=this.route.snapshot.params.id,this.employees$=this.projectFacade.getEmployees(),this.selectedProject$=this.projectFacade.getProjectById(this.projectId)}checkBoxChanged(o){const r=o.target.value;this.invitedMembers.includes(r)?this.invitedMembers=this.invitedMembers.filter(d=>d!==r):this.invitedMembers.push(r)}addMember(){this.invitedMembers.length&&this.projectFacade.addMemberToProject(this.invitedMembers,this.projectId)}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(u.J),e.Y36(a.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["invite"]],decls:11,vars:3,consts:[[1,"h-full","p-8"],[1,"mx-auto","max-w-sm","overflow-hidden","rounded-lg","bg-white","shadow-lg"],[1,"px-2","py-4","sm:flex","sm:items-center"],["class","flex-grow",4,"ngIf"],[1,"flex","justify-between","border-t","border-gray-300","p-4"],["routerLink","../tickets"],[1,"rounded-lg","py-2","px-4","font-medium","text-gray-900","shadow-md","hover:text-gray-700","dark:bg-slate-400","dark:text-white"],[1,"rounded-lg","bg-blue-500","py-2","px-4","text-white","shadow-md","hover:bg-blue-700",3,"click"],[1,"flex-grow"],[1,"px-2","py-3","font-normal","leading-tight"],[1,"font-bold"],["type","text","placeholder","Search teams or members",1,"my-2","h-10","w-full","rounded","bg-gray-200","p-3","text-sm","text-gray-900","focus:outline-none"],[1,"w-full"],[4,"ngFor","ngForOf"],[1,"my-2","flex","cursor-pointer","items-center","justify-between","rounded","hover:bg-blue-100"],[1,"ml-2","flex","items-center","gap-3"],["aria-describedby","remember","type","checkbox",1,"focus:ring-3","h-4","w-4","rounded","border","border-gray-300","bg-gray-50","focus:ring-blue-300","disabled:bg-gray-300","dark:border-gray-600","dark:bg-gray-200","dark:ring-offset-gray-800","dark:focus:ring-blue-600","dark:disabled:bg-gray-500",3,"id","value","disabled","change"],[1,"hover:text-blue-900","disabled:text-gray-500",3,"for"],[1,"mr-2","text-sm","text-gray-500"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,j,11,5,"div",3),e.ALo(4,"async"),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"a",5),e.TgZ(7,"button",6),e._uU(8," Go Back "),e.qZA(),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return r.addMember()}),e._uU(10," Save "),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(3),e.Q6J("ngIf",e.lcZ(4,1,r.selectedProject$)))},directives:[c.O5,a.yS,c.sg],pipes:[c.Ov],encapsulation:2}),t})();var y=i(7579),b=i(7146),A=i(1884),T=i(2722),w=i(564),q=i(4605);function C(t,n){if(1&t&&(e.ynx(0),e._UZ(1,"img",19),e.BQk()),2&t){const o=n.$implicit;e.xp6(1),e.MGl("src","https://i.pravatar.cc/200?u=",o._id,"",e.LSH),e.s9C("title",o.name)}}const k=function(t){return["/projects",t,"invite"]};function P(t,n){if(1&t&&(e.TgZ(0,"a",20),e.TgZ(1,"div",21),e.O4$(),e.TgZ(2,"svg",22),e._UZ(3,"path",23),e.qZA(),e.qZA(),e.qZA()),2&t){const o=e.oxw();e.Q6J("routerLink",e.VKq(1,k,o.project._id))}}const M=function(t){return["/projects",t,"tickets"]},F=function(t){return[".",t]};let U=(()=>{class t{constructor(){}ngOnInit(){console.log("USER:",this.user)}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["project"]],inputs:{project:"project",user:"user"},decls:27,vars:15,consts:[[3,"routerLink"],[1,"my-4","w-72","rounded-2xl","bg-white","p-4","px-4","pb-2","shadow-xl"],[1,"flex","justify-between"],[1,"line-clamp-1","mb-2","text-xl","font-medium"],["title","Edit",1,"ml-2","h-fit",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","hover:text-slate-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"],[1,"flex","h-[2.5rem]","space-x-2","text-sm","text-gray-400"],[1,"line-clamp-2"],[1,"mt-2","flex","items-center","justify-between","border-t-2","pt-2","text-sm","text-gray-400"],[1,"flex","items-center","space-x-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"],["title","Last updated"],[1,"my-2"],[1,"mb-2","text-base","font-medium"],[1,"flex","space-x-1"],[4,"ngFor","ngForOf"],["class","mt-auto mb-2",3,"routerLink",4,"ngIf"],["alt","member portrait",1,"h-6","w-6","rounded-full",3,"src","title"],[1,"mt-auto","mb-2",3,"routerLink"],["title","Add Member",1,"cursor-pointer"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","hover:text-slate-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"]],template:function(o,r){1&o&&(e.TgZ(0,"a",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"p",3),e._uU(4),e.qZA(),e.TgZ(5,"a",4),e.O4$(),e.TgZ(6,"svg",5),e._UZ(7,"path",6),e.qZA(),e.qZA(),e.qZA(),e.kcU(),e.TgZ(8,"div",7),e.TgZ(9,"p",8),e._uU(10),e.qZA(),e.qZA(),e.TgZ(11,"div",9),e.TgZ(12,"div",10),e.O4$(),e.TgZ(13,"svg",11),e._UZ(14,"path",12),e.qZA(),e.kcU(),e.TgZ(15,"p"),e._uU(16),e.qZA(),e.qZA(),e.TgZ(17,"p",13),e._uU(18),e.ALo(19,"date"),e.qZA(),e.qZA(),e.TgZ(20,"div",2),e.TgZ(21,"div",14),e.TgZ(22,"p",15),e._uU(23,"Team Members"),e.qZA(),e.TgZ(24,"div",16),e.YNc(25,C,2,2,"ng-container",17),e.qZA(),e.qZA(),e.YNc(26,P,4,3,"a",18),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.Q6J("routerLink",e.VKq(11,M,r.project._id)),e.xp6(4),e.Oqu(r.project.name),e.xp6(1),e.Q6J("routerLink",e.VKq(13,F,r.project._id)),e.xp6(5),e.Oqu(r.project.description),e.xp6(6),e.hij(" ",null!=r.project&&null!=r.project.tickets&&r.project.tickets.length?null==r.project||null==r.project.tickets?null:r.project.tickets.length:0," active tickets "),e.xp6(2),e.hij(" ",e.xi3(19,8,null==r.project?null:r.project.updatedAt,"MMM dd, yyyy")," "),e.xp6(7),e.Q6J("ngForOf",r.project.members),e.xp6(1),e.Q6J("ngIf","Admin"===r.user.role||"Manager"===r.user.role))},directives:[a.yS,c.sg,c.O5],pipes:[c.uU],encapsulation:2}),t})();var _=i(1999);function I(t,n){1&t&&(e.TgZ(0,"button",9),e._uU(1," New Project "),e.qZA())}function J(t,n){if(1&t&&(e.ynx(0),e._UZ(1,"project",10),e.BQk()),2&t){const o=n.$implicit,r=e.oxw();e.xp6(1),e.Q6J("project",o)("user",r.currentUser)}}const O=function(){return["name","description"]},L=[{path:"",component:(()=>{class t{constructor(o,r){this.projectFacade=o,this.authFacade=r,this.destroy$=new y.x,this.filterInput=new s.NI,this.searchTerm=""}ngOnInit(){var o;this.currentUser=null!==(o=this.authFacade.getUserDetails())&&void 0!==o?o:{},this.projects$=this.projectFacade.loadProjects(),this.filterInput.valueChanges.pipe((0,b.b)(200),(0,A.x)(),(0,T.R)(this.destroy$)).subscribe(r=>this.searchTerm=r)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(u.J),e.Y36(w.O))},t.\u0275cmp=e.Xpm({type:t,selectors:[["projectView"]],decls:13,vars:11,consts:[[1,"w-full","rounded-md","p-12"],[1,"flex","items-center","pb-6"],[1,"text-2xl","font-medium","text-gray-600","dark:text-gray-200"],[1,"ml-10","flex","lg:ml-20"],["ngDefaultControl","",3,"searchPlaceholder","formControl"],[1,"ml-8","lg:ml-16"],["routerLink","new","class","cursor-pointer rounded-md bg-cyan-500 px-4 py-2 font-medium tracking-wide text-white dark:bg-violet-800",4,"ngIf"],[1,"flex","flex-wrap","gap-8"],[4,"ngFor","ngForOf"],["routerLink","new",1,"cursor-pointer","rounded-md","bg-cyan-500","px-4","py-2","font-medium","tracking-wide","text-white","dark:bg-violet-800"],[3,"project","user"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div"),e.TgZ(3,"h1",2),e._uU(4," Projects "),e.qZA(),e.qZA(),e.TgZ(5,"div",3),e._UZ(6,"search-input",4),e.TgZ(7,"div",5),e.YNc(8,I,2,0,"button",6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e.YNc(10,J,2,2,"ng-container",8),e.ALo(11,"listFilterPipe"),e.ALo(12,"async"),e.qZA(),e.qZA()),2&o&&(e.xp6(6),e.Q6J("searchPlaceholder","search projects...")("formControl",r.filterInput),e.xp6(2),e.Q6J("ngIf","Admin"===r.currentUser.role),e.xp6(2),e.Q6J("ngForOf",e.Dn7(11,4,e.lcZ(12,8,r.projects$),e.DdM(10,O),r.searchTerm)))},directives:[q.J,s.Fj,s.JJ,s.oH,m.kH,c.O5,c.sg,a.rH,U],pipes:[_.$,c.Ov],encapsulation:2}),t})()},{path:"new",component:h,canActivate:[p.p],data:{roles:[l.u.ADMIN]}},{path:":id",component:h,canActivate:[p.p],data:{roles:[l.u.ADMIN]}},{path:":id/invite",component:v,canActivate:[p.p],data:{roles:[l.u.ADMIN,l.u.MANAGER]}}];let N=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[a.Bz.forChild(L)],a.Bz]}),t})();var Q=i(4466);let $=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[c.ez,N,Q.m]]}),t})()}}]);